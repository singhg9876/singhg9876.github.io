<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin</title>
    <link href="../static/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="../static/css/owl.carousel.min.css" rel="stylesheet" type="text/css" />
    <link href="../static/css/stylemedia.css" rel="stylesheet" type="text/css" />
    <link href="../static/css/animate.css" rel="stylesheet">
    <link href="../static/css/animations.css" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css">
    <link href="../static/css/style_crm.css" rel="stylesheet">
<!-- datatable -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js" type="application/javascript"></script>
<link rel="stylesheet" href="https://cdn.datatables.net/1.12.1/css/jquery.dataTables.min.css">
<link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.2.3/js/dataTables.buttons.min.js">
    <style>
        /* left sidebar */
        #sideBar {
            padding: 10px 20px 10px 30px;
        }

        #sideBar a {
            color: gray;
            font-weight: 700;
            font-size: 16px;
        }

        #sideBar div {
            padding: 10px 0px 10px 0px;
        }

        #sideBar img {
            margin-right: 10px;
            height: 22px;
        }
    </style>
    <style>
        #rightDiv {
            background-color: rgb(243, 245, 249);
            padding-left: 30px;
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light  well">
        <a class="navbar-brand" href="../index.html"> <img src="../static/images/logotop.png" class="img-fluid"
                style="width:75px;"></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ml-auto ">

                <li class="nav-item">
                    <div class="dropdown">
                        <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown-menu" aria-expanded="false">
                          Dropdown button
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                          <li><a class="dropdown-item" href="#">Action</a></li>
                          <li><a class="dropdown-item" href="#">Another action</a></li>
                          <li><a class="dropdown-item" href="#">Something else here</a></li>
                        </ul>
                      </div>
                    <!-- <a href="register"><button class="btn btn-primary wow rac zoomIn">LOGIN / REGISTER</button></a> -->
                </li>
            </ul>

        </div>
    </nav>
    <div class="row" style="width: 100%;">
        <div style="width: 20%;">
            <div id="sideBar" style="height: 100%;background-color: white;">
                <div><a href="1_admin_page.html"><img src="../static/images/house.png" alt="">Home</a>
                </div>
                <div><a href="2_school_admin.html"><img src="../static/images/user-group.png" alt="">Schools</a>
                </div>
                <div><a href="4_registered_member.html"><img src="../static/images/calendar-minus.png" alt="">Registered
                        Members</a>
                </div>
                <div><a href="9_doctor_admin.html"><img src="../static/images/user.png" alt="">Doctors</a>
                </div>
                <div><a href="/scheduleACamp"><img src="../static/images/user.png" alt="">Camps</a>
                </div>
                <div><a href="/userAdmin"><img src="../static/images/user.png" alt="">Users</a></div>
            </div>
        </div>
        <div id="rightDiv" style="min-height: 600px;width: 80%;">
            <style>
                /* admin page */
                .addButton {
                    background-color: white;
                    margin: 20px 10px 20px 10px;
                    border: 1px solid rgb(237, 237, 253);
                }
            
                .plusIcon {
                    font-size: 24px;
                    padding-right: 10px;
                }
            </style>
            <div class="row m-auto" style="width: 100%;">
                <div style="width: 60%;">
                    <p class="topHeading" style="margin-bottom: 20px;">Schools</p>    
                </div>
                <div style="width: 20%;" class="row m-auto">
                    <div class="adminCard">
                        <div class="row m-auto">
                            <div style="width: 70%;">
                                <p class="cardPara">Total Schools Registered</p>
                            </div>
                            <div style="width: 30%;"><p class="cardGreenText">{{schools.count}}</p></div>
                        </div>
                    </div>    
                </div>
                <a href="/addSchool"><button style="float: right;" class="btn addButton"><span class="plusIcon">+</span>Add School</button></a>
                <span style="clear: both;"></span>
            </div>
            
            <div class="rightInnerDiv m-auto" style="width: 100%;">
                <table id="freeuser" class="table no-border" style="width:100%">
                    <thead>
                        <tr>
                            <th><input type="checkbox"></th>
                            <th>SCHOOL ID</th>
                            <th>SCHOOL NAME</th>
                            <th>LOCATION</th>
                            <th>SUPERVISOR</th>
                            <th>EDIT</th>
                            <th>DETAILS</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for school in schools %}
                        <tr class="tabRw">
                            <td><input type="checkbox"></td>
                            <td>{{school.school_id}}</td>
                            <td>{{school.school_name}}</td>
                            <td>{{school.address}}, {{school.city}}, {{school.state}}, {{school.country}}</td>
                            <td>{{school.supervisor}}</td>
                            <!-- <td>1</td>
                            <td>Ashish</td>
                            <td>pro</td>
                            <td>TCS</td> -->
                            <td></td>
                            <!-- <button class="btn blueBtnTbl">Edit</button> -->
                            <td></td>
                            <!-- <button class="btn greenBtnTbl">Details</button> -->
                        </tr>
                        {%endfor%}
                    </tbody>
                </table>
            </div>
            <script>
                $(document).ready(function () {
                    let freeTable = $('#freeuser').DataTable({
                        "columnDefs": [
                            {
                                "targets": -2,
                                "data": null,
                                "defaultContent": "<button class='btn blueBtnTbl' type='save'>Edit</button>"
                            },
                            {
                                "targets": -1,
                                "data": null,
                                "defaultContent": "<button class='btn greenBtnTbl' type='saveCertificate'>Details</button>"
                            },
                        ]
                    })
                })
                function createUrl() {
                    let cName = $("input[name=college]").val()
                    let internId = $("input[name=internId]").val()
            
                    let url = '{% url "page_search" %}'
                    console.log('url  ', url, $.param({ 'college': cName, 'internId': internId }));
                    console.log(url + "?" + $.param({ 'college': cName, 'internId': internId }));
                    return url + "?" + $.param({ 'college': cName, 'internId': internId })
                }
            
                $('#freeuser tbody').on('click', 'button', function (element) {
                    let row = freeTable.row($(this).parents('tr'));
                    let data = row.data();
                    const status = data[8]
                    if ($(element.currentTarget).attr('type') === 'save') {
                        window.open("goli?id=" + data[1])
                        return;
                    }
                    if ($(element.currentTarget).attr('type') === 'saveCertificate') {
                        window.open("gcci?id=" + data[1])
                        return;
                    }
                });
            </script>
        </div>
    </div>

</body>

</html>